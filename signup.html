<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>アカウント新規登録 | 湘南中央大学</title>
  <style>
    * { box-sizing: border-box; }
    body { 
      margin: 0; 
      font-family: "Helvetica Neue", Arial, sans-serif; 
      background: #f0f2f5; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      height: 100vh; 
    }
    .signup-container { 
      background: #fff; 
      width: 450px; 
      padding: 40px; 
      border-radius: 12px; 
      box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
      border-top: 5px solid #0b2a44; 
    }
    .header-area { text-align: center; margin-bottom: 30px; }
    .header-area h2 { color: #0b2a44; font-size: 20px; margin: 0; }
    .header-area p { font-size: 12px; color: #777; margin-top: 5px; }

    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; font-size: 13px; font-weight: bold; margin-bottom: 8px; color: #555; }
    .form-group input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; background: #fafafa; }
    
    .btn-signup { width: 100%; padding: 14px; background: #0b2a44; color: #fff; border: none; border-radius: 4px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; }
    .btn-signup:hover { background: #1a508b; }

    .footer-links { text-align: center; margin-top: 25px; font-size: 13px; }
    .footer-links a { color: #1a508b; text-decoration: none; }

    /* エラー・成功メッセージ */
    #msg { padding: 10px; border-radius: 4px; margin-bottom: 20px; font-size: 14px; display: none; text-align: center; }
    .error { background: #ffebee; color: #c62828; display: block !important; }
    .success { background: #e8f5e9; color: #2e7d32; display: block !important; }
  </style>
</head>
<body>

<div class="signup-container">
  <div class="header-area">
    <h2>学内システム利用登録</h2>
    <p>教職員・研究者用アカウント作成</p>
  </div>

  <div id="msg"></div>

  <form id="signupForm">
    <div class="form-group">
      <label>氏名</label>
      <input type="text" id="newName" placeholder="湘南 太郎" required>
    </div>
    <div class="form-group">
      <label>希望するユーザーID</label>
      <input type="text" id="newId" placeholder="shonan_2026" required autocomplete="off">
    </div>
    <div class="form-group">
      <label>パスワード</label>
      <input type="password" id="newPw" placeholder="8文字以上推奨" required>
    </div>
    <button type="submit" class="btn-signup">登録を完了する</button>
  </form>

  <div class="footer-links">
    <a href="login.html">ログイン画面へ戻る</a>
  </div>
</div>

<script>
  document.getElementById('signupForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('newName').value;
    const id = document.getElementById('newId').value.trim();
    const pw = document.getElementById('newPw').value.trim();
    const msg = document.getElementById('msg');

    // 1. すでに登録されているユーザーリストを読み込む (なければ空の配列)
    let users = JSON.parse(localStorage.getItem('scu_users')) || [];

    // 2. IDの重複チェック
    const isDuplicate = users.some(user => user.id === id);
    if (isDuplicate) {
      msg.innerText = "このIDはすでに使用されています。";
      msg.className = "error";
      return;
    }

    // 3. 新しいユーザーを追加
    const newUser = { id: id, pw: pw, name: name };
    users.push(newUser);

    // 4. 保存する
    localStorage.setItem('scu_users', JSON.stringify(users));

    // 成功演出
    msg.innerText = "登録完了！ログイン画面へ移動します...";
    msg.className = "success";
    document.querySelector('.btn-signup').disabled = true;

    setTimeout(() => {
      window.location.href = 'login.html';
    }, 1500);
  });
</script>

</body>
</html>
